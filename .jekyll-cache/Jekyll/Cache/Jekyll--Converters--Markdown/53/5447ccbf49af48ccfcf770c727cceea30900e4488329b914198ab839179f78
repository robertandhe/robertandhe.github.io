I"÷a<h1 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h1>
<p>Alice plays the following game, loosely based on the card game â€œ21â€.</p>

<p>Alice starts with <code class="highlighter-rouge">0</code> points, and draws numbers while she has less than <code class="highlighter-rouge">K</code> points.  During each draw, she gains an integer number of points randomly from the range [<code class="highlighter-rouge">1, W</code>], where <code class="highlighter-rouge">W</code> is an integer.  Each draw is independent and the outcomes have equal probabilities.</p>

<p>Alice stops drawing numbers when she gets <code class="highlighter-rouge">K</code> or more points.  What is the probability that she has N or less points?</p>
<h3 id="example-1">Example 1:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">K</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">W</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">Output</span><span class="o">:</span> <span class="mf">1.00000</span>
<span class="n">Explanation</span><span class="o">:</span>  <span class="n">Alice</span> <span class="n">gets</span> <span class="n">a</span> <span class="n">single</span> <span class="n">card</span><span class="p">,</span> <span class="n">then</span> <span class="n">stops</span><span class="p">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="example-2">Example 2:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">K</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">W</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">Output</span><span class="o">:</span> <span class="mf">0.60000</span>
<span class="n">Explanation</span><span class="o">:</span>  <span class="n">Alice</span> <span class="n">gets</span> <span class="n">a</span> <span class="n">single</span> <span class="n">card</span><span class="p">,</span> <span class="n">then</span> <span class="n">stops</span><span class="p">.</span>
<span class="n">In</span> <span class="mi">6</span> <span class="n">out</span> <span class="n">of</span> <span class="n">W</span> <span class="o">=</span> <span class="mi">10</span> <span class="n">possibilities</span><span class="p">,</span> <span class="n">she</span> <span class="n">is</span> <span class="n">at</span> <span class="n">or</span> <span class="n">below</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span> <span class="n">points</span><span class="p">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="example-3">Example 3:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">K</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span> <span class="n">W</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">Output</span><span class="o">:</span> <span class="mf">0.73278</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="note">Note:</h3>
<ol>
  <li><code class="highlighter-rouge">0 &lt;= K &lt;= N &lt;= 10000</code></li>
  <li><code class="highlighter-rouge">1 &lt;= W &lt;= 10000</code></li>
  <li>Answers will be accepted as correct if they are within <code class="highlighter-rouge">10^-5</code> of the correct answer.</li>
  <li>The judging time limit has been reduced for this question.</li>
</ol>

<h1 id="è§£æ³•">è§£æ³•</h1>
<h2 id="è§£æ³•-1">è§£æ³• 1</h2>
<p>é¢˜ç›®å°±æ˜¯21ç‚¹æ¸¸æˆï¼Œæ¯æ¬¡ç­‰æ¦‚ç‡é€‰å‡º[1, W]èŒƒå›´å†…æ•´æ•°ï¼Œå¤§äºç­‰äºKæ˜¯ä¸å†æŠ½ï¼Œé—®æœ€ç»ˆå°äºç­‰äºNçš„æ¦‚ç‡ã€‚<br />
è¿™é“é¢˜æˆ‘é¦–å…ˆæƒ³çš„æ˜¯æ±‚å‡ºåœæ­¢æ—¶å–å„ä¸ªæ•°çš„æ¦‚ç‡ï¼Œå†æ±‚å‡ºå¤§äºç­‰äºKå¹¶ä¸”å°äºç­‰äºNçš„æ¦‚ç‡ã€‚åŠ¨æ€æ–¹ç¨‹é•¿åº¦è‚¯å®šæ˜¯K+Wäº†ï¼Œå› ä¸ºå¤§äºç­‰äºKæ—¶å°±ä¸æŠ½äº†ï¼Œæ¯æ¬¡æœ€å¤šæŠ½åˆ°Wï¼Œæ‰€ä»¥èƒ½å¾—åˆ°çš„æœ€å¤§å€¼ä¸ºK+W-1ã€‚dp[i]å°±è¡¨ç¤ºå–åˆ°içš„æ¦‚ç‡äº†ã€‚<br />
é‚£ä¹ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä½•æ±‚ï¼Œè¿™é‡Œå°±æ˜¯å…¨æ¦‚ç‡å…¬å¼äº†ï¼Œiå¯ä»¥ç”±ä¹‹å‰å–åˆ°i-1,å†æŠ½ä¸€ä¸ª1å¾—åˆ°ï¼Œä¹Ÿå¯ä»¥ç”±ä¹‹å‰å–åˆ°i-2,å†æŠ½ä¸€ä¸ª2å¾—åˆ°â€¦ï¼Œä¹Ÿå¯ä»¥ç”±ä¹‹å‰å–åˆ°i-W,å†å–ä¸€ä¸ªWå¾—åˆ°ã€‚æœ€å¤šå¾€åé€€Wä¸ªï¼Œå› ä¸ºå¯ä»¥æŠ½çš„æœ€å¤§æ•°ä¸ºWã€‚åœ¨è¿™é‡Œæ³¨æ„ä¸‹å¤§äºç­‰äºKæ˜¯ä¸èƒ½æŠ½ï¼Œå‡è®¾ä¹‹å‰å–jï¼Œæƒ³å¾—åˆ°iéœ€è¦å†æŠ½ä¸€ä¸ªi-j,è¿™ä¸ªæ•°çš„æ¦‚ç‡ç­‰äº1/Wï¼Œæ‰€ä»¥dp[i] += dp[j] / Wã€‚<br />
è¿™é¢˜ä»£ç æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯æƒœTLEäº†ã€‚</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kt">double</span> <span class="nf">new21Game</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="kt">int</span> <span class="n">K</span><span class="p">,</span> <span class="kt">int</span> <span class="n">W</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">W</span> <span class="p">;</span> <span class="o">--</span><span class="n">j</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">K</span><span class="p">)</span>
				<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="p">}</span>		
	<span class="p">}</span>
	<span class="kt">double</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">K</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">d</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">)</span>
			<span class="n">n</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">n</span> <span class="o">/</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="è§£æ³•-2">è§£æ³• 2</h2>
<p>è¿™é“é¢˜æ¢äº†ä¸ªæ€è·¯ï¼ŒåŠ¨æ€æ•°ç»„sum[i]è¡¨ç¤ºå–åˆ°[0, i]èŒƒå›´å†…æ•°çš„æ¦‚ç‡ä¹‹å’Œã€‚å³sum[i] = p[0] + p[1] + p[2] + â€¦ + p[i]ã€‚<br />
çŠ¶æ€è½¬ç§»æ–¹ç¨‹éœ€è¦åˆ†æƒ…å†µæ¥è®¨è®ºï¼š</p>
<ul>
  <li>å¦‚æœi &lt;= Wï¼Œé‚£ä¹ˆjå¯ä»¥ä»i-1æ¨åˆ°0ï¼Œå› ä¸ºæŠ½çš„æœ€å¤§æ•°ä¸ä¼šè¶…è¿‡Wã€‚ä¾‹å¦‚ p[7] = 1 / W * (p[6] + p[5] + â€¦ + p[0])ã€‚7å¯ä»¥ç”±6åŠ 1ï¼Œ5åŠ 2ï¼Œâ€¦ ï¼Œ0åŠ 7å¾—åˆ°ã€‚æ‰€ä»¥p[i] = 1/ W * sum[i - 1], sum[i] = sum[i - 1] + p[i] = sum[i - 1] + sum[i - 1] / Wï¼›</li>
  <li>å¦‚æœi &gt; W, é‚£ä¹ˆjæœ€å¤šå¯ä»¥ä»i - 1æ¨åˆ°i - Wã€‚ä¾‹å¦‚W = 10, p[15] = 1 / W * (p[14] + p[13] + p[12] + â€¦ + p[5])ã€‚å³p[i] = 1/ W * (sum[i - 1] - sum[i - W - 1])ã€‚sum[i] = sum[i - 1] + p[i] = sum[i - 1] + (sum[i - 1] - sum[i - W - 1]) / W;</li>
</ul>

<p>ä½†æ˜¯è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼Œjå¤§äºç­‰äºKæ˜¯å°±ä¸èƒ½å†æŠ½äº†ï¼Œæ‰€ä»¥ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹åº”è¯¥æ”¹ä¸ºï¼š</p>
<ul>
  <li>å¦‚æœi &lt;= Wå¹¶ä¸”i &lt;= Kï¼Œé‚£ä¹ˆjå¯ä»¥ä»i-1æ¨åˆ°0ï¼Œå› ä¸ºæŠ½çš„æœ€å¤§æ•°ä¸ä¼šè¶…è¿‡Wã€‚ä¾‹å¦‚ p[7] = 1 / W * (p[6] + p[5] + â€¦ + p[0])ã€‚7å¯ä»¥ç”±6åŠ 1ï¼Œ5åŠ 2ï¼Œâ€¦ ï¼Œ0åŠ 7å¾—åˆ°ã€‚æ‰€ä»¥p[i] = 1/ W * sum[i - 1], sum[i] = sum[i - 1] + p[i] = sum[i - 1] + sum[i - 1] / Wï¼›</li>
  <li>å¦‚æœi &gt; Wå¹¶ä¸”i &lt;= K, é‚£ä¹ˆjæœ€å¤šå¯ä»¥ä»i - 1æ¨åˆ°i - Wã€‚ä¾‹å¦‚W = 10, p[15] = 1 / W * (p[14] + p[13] + p[12] + â€¦ + p[5])ã€‚å³p[i] = 1/ W * (sum[i - 1] - sum[i - W - 1])ã€‚sum[i] = sum[i - 1] + p[i] = sum[i - 1] + (sum[i - 1] - sum[i - W - 1]) / W;</li>
</ul>

<p>å½“i &gt; Kæ—¶ï¼Œjä¸èƒ½ä»i - 1å¼€å§‹ï¼Œjè‡³å¤šèƒ½ä»K-1å¼€å§‹ï¼Œæ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿˜åŒ…æ‹¬ï¼š</p>
<ul>
  <li>å¦‚æœi &lt;= W å¹¶ä¸”i &gt; K, p[i] = 1 / W * sum[K - 1], sum[i] = sum[i - 1] + p[i] = sum[i - 1] + sum[K - 1] / Wï¼›</li>
  <li>å¦‚æœi &gt; Wå¹¶ä¸” i &gt; K, p[i] = 1 / W * (sum[K - 1] - sum[i - W - 1]), sum[i] = sum[i - 1] + p[i] = sum[i - 1] + (sum[K - 1] - sum[i - W - 1]) / Wã€‚</li>
</ul>

<p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒæŠŠKå’ŒWåˆäºŒä¸ºä¸€ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿä¸çŸ¥é“Kå’ŒWè°å¤§è°å°ã€‚åªéœ€æŒ‰ç…§å°çš„æ¥å³å¯ã€‚<br />
è¿”å›æœ€ç»ˆæ•°å¤§äºç­‰äºKå¹¶ä¸”å°äºç­‰äºNçš„æ¦‚ç‡ï¼Œç”±æ¡ä»¶æ¦‚ç‡å…¬å¼å°±æ˜¯å¤§äºç­‰äºKå¹¶ä¸”å°äºç­‰äºNçš„æ€»æ¦‚ç‡é™¤ä»¥å¤§äºç­‰äºKçš„æ¦‚ç‡ï¼Œæ‰€ä»¥è¿”å›(sum[N] - sum[K - 1]) / (sum[K + W - 1] - sum[K - 1])ã€‚ï¼ˆæ³¨ï¼šå…¶å®sum[K + W - 1] - sum[K - 1] = 1ï¼Œå› ä¸ºæœ€ç»ˆè‚¯å®šå¤§äºç­‰äº1ã€‚ï¼‰</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kt">double</span> <span class="nf">new21Game</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="kt">int</span> <span class="n">K</span><span class="p">,</span> <span class="kt">int</span> <span class="n">W</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">K</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">)</span>
		<span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">sum</span><span class="p">(</span><span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">);</span>
	<span class="n">sum</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">W</span><span class="p">)</span>
			<span class="n">sum</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sum</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="n">sum</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sum</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">W</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>  <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="n">K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">K</span> <span class="o">+</span> <span class="n">W</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sum</span><span class="p">[</span><span class="n">K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>time compelxity: O(K + W)<br />
space complexity: O(K + W)<br />
runtime: 35.31%<br />
memory usage: 90.91%</p>

<h2 id="è§£æ³•-3">è§£æ³• 3</h2>
<p>å’Œè§£æ³•2æ€æƒ³ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å…ˆä¸åŒºåˆ†iå’ŒKå¤§å°,åŠ ä¸Šå†è¯´ï¼Œå¦‚æœi &gt; K,è¡¨ç¤ºåŠ å¤šäº†ï¼ŒæŠŠå¤šçš„å‡å»å³å¯ã€‚</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="kt">double</span> <span class="nf">new21Game</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="kt">int</span> <span class="n">K</span><span class="p">,</span> <span class="kt">int</span> <span class="n">W</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">K</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">)</span>
		<span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">);</span>
	<span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">W</span><span class="p">)</span>
			<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="k">else</span> 
			<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">W</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">K</span><span class="p">)</span>
			<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dp</span><span class="p">[</span><span class="n">K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">-</span> <span class="n">dp</span><span class="p">[</span><span class="n">K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>time compelxity: O(K + W)<br />
space complexity: O(K + W)<br />
runtime: 82.91%<br />
memory usage: 90.91%</p>

<h2 id="è§£æ³•-4">è§£æ³• 4</h2>
<p>å’Œè§£æ³•2ï¼Œ3æ€æƒ³å¤§åŒå°å¼‚ï¼Œè¿™é‡ŒåŠ¨æ€æ•°ç»„å¤§å°ä¸ºN+1,å› ä¸ºæˆ‘ä»¬åªå…³å¿ƒå¤§äºç­‰äºKå¹¶ä¸”å°äºç­‰äºNçš„æ¦‚ç‡ã€‚åŠ¨æ€æ•°ç»„dp[i]è¡¨ç¤ºå–åˆ°içš„æ¦‚ç‡è€Œä¸æ˜¯è§£æ³•2ï¼Œ3ä¸­çš„ç´¯åŠ æ¦‚ç‡ã€‚åœ¨éå†è¿‡ç¨‹ä¸­å¦‚æœå¤§äºç­‰äºKï¼Œè¡¨ç¤ºåˆ°æœ«å°¾ï¼ŒåŠ å…¥resã€‚å°äºKè¿˜èƒ½ç»§ç»­æŠ½ã€‚å¤§äºç­‰äºWè¦å‡å»å¤šåŠ çš„ã€‚</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kt">double</span> <span class="nf">new21Game</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="kt">int</span> <span class="n">K</span><span class="p">,</span> <span class="kt">int</span> <span class="n">W</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">K</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="n">K</span> <span class="o">+</span> <span class="n">W</span><span class="p">)</span>
		<span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sumW</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sumW</span> <span class="o">/</span> <span class="n">W</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">K</span><span class="p">)</span>
			<span class="n">sumW</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">else</span> 
			<span class="n">res</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">W</span><span class="p">)</span>
			<span class="n">sumW</span> <span class="o">-=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">W</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>time compelxity: O(N)<br />
space complexity: O(N)<br />
runtime:  35.31%<br />
memory usage: 100.00%</p>

<h1 id="link">Link</h1>
<p><a href="https://leetcode.com/problems/new-21-game/">leetcode-837</a><br />
<a href="https://www.cnblogs.com/grandyang/p/10386525.html">solution 2-4</a></p>
:ET