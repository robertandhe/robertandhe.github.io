I"ó@<h1 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h1>
<p>Given a non-empty string s and a dictionary wordDict containing a list of non-empty words, add spaces in s to construct a sentence where each word is a valid dictionary word. Return all such possible sentences.</p>
<h3 id="note">Note:</h3>
<ul>
  <li>The same word in the dictionary may be reused multiple times in the segmentation.</li>
  <li>You may assume the dictionary does not contain duplicate words.</li>
</ul>

<h3 id="example-1">Example 1:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">"catsanddog"</span>
<span class="n">wordDict</span> <span class="o">=</span> <span class="p">[</span><span class="s">"cat"</span><span class="p">,</span> <span class="s">"cats"</span><span class="p">,</span> <span class="s">"and"</span><span class="p">,</span> <span class="s">"sand"</span><span class="p">,</span> <span class="s">"dog"</span><span class="p">]</span>
<span class="n">Output</span><span class="o">:</span>
<span class="p">[</span>
  <span class="s">"cats and dog"</span><span class="p">,</span>
  <span class="s">"cat sand dog"</span>
<span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="example-2">Example 2:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">"pineapplepenapple"</span>
<span class="n">wordDict</span> <span class="o">=</span> <span class="p">[</span><span class="s">"apple"</span><span class="p">,</span> <span class="s">"pen"</span><span class="p">,</span> <span class="s">"applepen"</span><span class="p">,</span> <span class="s">"pine"</span><span class="p">,</span> <span class="s">"pineapple"</span><span class="p">]</span>
<span class="n">Output</span><span class="o">:</span>
<span class="p">[</span>
  <span class="s">"pine apple pen apple"</span><span class="p">,</span>
  <span class="s">"pineapple pen apple"</span><span class="p">,</span>
  <span class="s">"pine applepen apple"</span>
<span class="p">]</span>
<span class="n">Explanation</span><span class="o">:</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">you</span> <span class="n">are</span> <span class="n">allowed</span> <span class="n">to</span> <span class="n">reuse</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="n">word</span><span class="p">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="example-3">Example 3:</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span>
<span class="n">Input</span><span class="o">:</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">"catsandog"</span>
<span class="n">wordDict</span> <span class="o">=</span> <span class="p">[</span><span class="s">"cats"</span><span class="p">,</span> <span class="s">"dog"</span><span class="p">,</span> <span class="s">"sand"</span><span class="p">,</span> <span class="s">"and"</span><span class="p">,</span> <span class="s">"cat"</span><span class="p">]</span>
<span class="n">Output</span><span class="o">:</span>
<span class="p">[]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="è§£æ³•">è§£æ³•</h1>
<h2 id="è§£æ³•-1">è§£æ³• 1</h2>
<p>è¿™é¢˜æ˜¯ä¹‹å‰é‚£é“<a href="https://leetcode.com/problems/word-break/">leetcode139-Word Break</a>çš„å‡çº§ç‰ˆï¼Œé‚£é‡Œåªè¦æ±‚æ±‚å‡ºèƒ½å¦breakï¼Œè¿™é‡Œè¦ç»™å‡ºæ‰€æœ‰breakçš„ç»„åˆã€‚<br />
é¦–å…ˆæƒ³äº†å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•ï¼Œç”¨ä¸€ä¸ªé˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰èƒ½å¤Ÿæ‰¾åˆ°çš„å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä¸ºäº†å¾€åæ‰¾ï¼Œåº”è¯¥è®°å½•å½“å‰å­—ç¬¦ä¸²æœ«å°¾å¯¹åº”sä¸­çš„ä½ç½®ï¼Œè¿™é‡Œç”¨pairå­˜å‚¨ã€‚ä¸ºäº†åŠ å¿«åœ¨wordDictä¸­æŸ¥æ‰¾çš„é€Ÿåº¦ï¼Œç”¨unordered_setå­˜å‚¨åŠ å¿«æŸ¥æ‰¾ã€‚å¯¹æ¯ä¸ªpairï¼Œä»pair.secondå¾€åæ‰¾ï¼Œå¦‚æœåˆ°æŸä¸ªä½ç½®çš„å­ä¸²èƒ½å¤Ÿåœ¨dictä¸­æ‰¾åˆ°ï¼Œå°±åŠ ä¸Šå»â€¦</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">wordBreak</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">wordDict</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">word</span> <span class="o">:</span> <span class="n">wordDict</span><span class="p">)</span>
		<span class="n">maxLen</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxLen</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">word</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>
	<span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">(</span><span class="n">wordDict</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">wordDict</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
	<span class="n">queue</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">q</span><span class="p">;</span>
	<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">({</span><span class="s">""</span><span class="p">,</span> <span class="mi">0</span><span class="p">});</span>
	<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
	<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
		<span class="k">auto</span> <span class="n">p</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
		<span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span> <span class="o">+</span> <span class="n">maxLen</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">string</span> <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">p</span><span class="p">.</span><span class="n">second</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">)){</span>
				<span class="n">string</span> <span class="n">m</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
					<span class="n">m</span> <span class="o">+=</span> <span class="n">t</span><span class="p">;</span>
				<span class="k">else</span> 
					<span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">first</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">t</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
					<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
				<span class="k">else</span> 
					<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">({</span><span class="n">m</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">});</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>è¿™ä¸ªè§£æ³•æ˜¯å¯è¡Œçš„ï¼Œå¯æ˜¯åªèƒ½å¤Ÿé€šè¿‡3/4çš„æµ‹è¯•ï¼ŒTLEäº†ã€‚</p>

<h2 id="è§£æ³•-2">è§£æ³• 2</h2>
<p>è¿™é“é¢˜è¿˜æ˜¯é€‚åˆé€’å½’è§£æ³•ï¼Œé€’å½’èƒ½å¤Ÿå¾ˆå¥½éå†æ‰€æœ‰æƒ…å†µï¼Œè¿™é‡Œä»¥dictä¸­çš„wordä¸ºéå†ç‚¹ï¼Œè€Œä¸æ˜¯sä¸­ï¼Œå’Œè§£æ³•1æœ‰å¾ˆå¤§ä¸åŒã€‚åœ¨å½“å‰sä¸­ï¼Œå¯¹æ¯ä¸ªwordå¦‚æœèƒ½å¤Ÿåœ¨så¼€å¤´word.size()æ‰¾åˆ°ï¼Œåˆ™å¯ä»¥é€’å½’åˆ°ä¸‹å±‚ï¼Œså‡å»wordçš„é•¿åº¦ï¼Œå¯¹ä¸‹å±‚é€’å½’è¿”å›çš„vector<string>æ¯ä¸ªåŠ ä¸Šwordè¿˜æœ‰ç©ºæ ¼å°±æ˜¯è¿™å±‚é€’å½’è¦è¿”å›çš„ã€‚ä¸ºäº†å‡å°‘é‡å¤è®¡ç®—ï¼Œåº”è¯¥ç”¨å“ˆå¸Œè¡¨å­˜å‚¨så¯¹åº”stringå‘é‡ï¼Œé€’å½’å¼€å§‹æ—¶å¦‚æœèƒ½åœ¨å“ˆå¸Œè¡¨æ‰¾åˆ°ç›´æ¥è¿”å›å³å¯ã€‚è¿˜æœ‰è¾¹ç•Œæƒ…å†µsä¸ºç©ºä¸²äº†ï¼Œè¿™æ˜¯åº”è¯¥è¿”å›ç©ºä¸²ï¼Œè€Œä¸”ä¸Šå±‚ä¸åŠ ç©ºæ ¼ã€‚</string></p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">helper</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">wordDict</span><span class="p">,</span> <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;&amp;</span> <span class="n">m</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">m</span><span class="p">[</span><span class="n">s</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
		<span class="k">return</span> <span class="p">{</span><span class="s">""</span><span class="p">};</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="n">word</span> <span class="o">:</span> <span class="n">wordDict</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">word</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="o">!=</span> <span class="n">word</span><span class="p">)</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">word</span><span class="p">.</span><span class="n">size</span><span class="p">()),</span> <span class="n">wordDict</span><span class="p">,</span> <span class="n">m</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="n">str</span> <span class="o">:</span> <span class="n">tmp</span><span class="p">)</span>
			<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">word</span> <span class="o">+</span> <span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s">""</span> <span class="o">:</span> <span class="s">" "</span><span class="p">)</span> <span class="o">+</span> <span class="n">str</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">m</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">wordBreak2</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">wordDict</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">helper</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">wordDict</span><span class="p">,</span> <span class="n">m</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>runtime: 69.58%<br />
memory usage: 90.91%</p>

<h1 id="link">Link</h1>
<p><a href="https://leetcode.com/problems/word-break-ii/">leetcode-140</a><br />
<a href="https://www.cnblogs.com/grandyang/p/4576240.html">solution</a></p>
:ET