I"à:<p>pythonå±äºè§£é‡Šæ€§è¯­è¨€ï¼Œå¦‚æœæƒ³åœ¨åˆ«äººçš„ç”µè„‘ä¸Šè¿è¡Œè‡ªå·±çš„è„šæœ¬ï¼Œè¿˜å¾—è¦å…ˆè£…ä¸Špythonç¯å¢ƒä»¥åŠç›¸å…³çš„åŒ…ï¼Œè´¹æ—¶è´¹åŠ›ã€‚åœ¨æœ€è¿‘çš„ä¸€ä¸ª
é¡¹ç›®ä¸­ï¼Œæ°å¥½é‡åˆ°äº†è¿™ç§éœ€æ±‚ï¼Œè¦æŠŠè‡ªå·±çš„ç¨‹åºå‘å¸ƒï¼Œå€ŸåŠ©<a href="https://www.pyinstaller.org/index.html">pyinstaller</a>å¯ä»¥è§£å†³ã€‚</p>
<h2 id="pyinstallerå®‰è£…">pyinstallerå®‰è£…</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">pyinstaller</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>æˆ–è€…å»ç½‘ç«™ä¸‹è½½åˆ°æœ¬åœ°å®‰è£…ã€‚</p>
<h2 id="pyinstallerä½¿ç”¨">pyinstallerä½¿ç”¨</h2>
<ol>
  <li>å‘½ä»¤æ ¼å¼
å‘½ä»¤ä¸º
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pyinstaller</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">script</span> <span class="p">[</span><span class="n">script</span><span class="p">]</span><span class="o">|</span><span class="n">specfile</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>æœ€ç®€å•ä½¿ç”¨ï¼Œå‘½ä»¤è¡Œè¿›å…¥ç›¸å…³ç›®å½•ï¼Œè¿è¡Œ</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pyinstaller</span> <span class="n">myscript</span><span class="o">.</span><span class="n">py</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>å³å¯ç”Ÿæˆå…ˆå…³exeæ–‡ä»¶ã€‚</p>
  </li>
  <li>æ‰“åŒ…è¿‡ç¨‹
    <ul>
      <li>åœ¨å½“å‰ç›®å½•ç”Ÿæˆmyscript.specæ–‡ä»¶</li>
      <li>åœ¨å½“å‰ç›®å½•åˆ›å»ºbuildæ–‡ä»¶å¤¹</li>
      <li>æŠŠä¸€äº›logæ–‡ä»¶å†™å…¥buildæ–‡ä»¶å¤¹</li>
      <li>åœ¨å½“å‰ç›®å½•åˆ›å»ºdistæ–‡ä»¶å¤¹</li>
      <li>åœ¨distæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</li>
    </ul>
  </li>
  <li>å¸¸ç”¨å‚æ•°è¯¦è§£
    <ul>
      <li>-y or â€“onconfirm
ä¸è¯¢é—®ç®¡ç†å‘˜æƒé™</li>
      <li>-D or â€“onedir
åªç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹</li>
      <li>-F or â€“onefile
åªç”Ÿæˆä¸€ä¸ªexeæ–‡ä»¶</li>
      <li>-n or â€“name 
è®¾ç½®appæ–‡ä»¶åï¼Œé»˜è®¤å’Œmyscirpt.pyåŒå</li>
      <li>â€“add-data 
æ·»åŠ éäºŒè¿›åˆ¶èµ„æºæ–‡ä»¶</li>
      <li>â€“add-binary
æ·»åŠ éäºŒè¿›åˆ¶èµ„æºæ–‡ä»¶</li>
      <li>-hidden-import
ä¸å¯è§å¯¼å…¥åŒ…</li>
      <li>-d or â€“debug
è°ƒè¯•æ¨¡å¼ï¼Œåå¯æ¥all, imports, bootloader, noarchive</li>
      <li>-i or â€“icon
è®¾ç½®ç¨‹åºå›¾æ ‡</li>
      <li>-c or â€“console or â€“nowindowed
æ‰“å¼€æ§åˆ¶å°ï¼ˆcmdï¼‰</li>
      <li>-w or â€“windowed or â€“noconsole
ä¸æ‰“å¼€æ§åˆ¶å°ï¼ˆcmdï¼‰</li>
    </ul>
  </li>
</ol>

<h2 id="ä¾‹å­">ä¾‹å­</h2>
<ol>
  <li>å‘½ä»¤è¡Œ<br />
windowså¹³å°
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">pyinstaller</span> <span class="o">--</span><span class="n">noconfirm</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="n">WARN</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">onefile</span> <span class="o">--</span><span class="n">nowindow</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">data</span><span class="o">=</span><span class="s">"README;."</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">data</span><span class="o">=</span><span class="s">"image1.png;img"</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">binary</span><span class="o">=</span><span class="s">"libfoo.so;lib"</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">hidden</span><span class="o">-</span><span class="k">import</span><span class="o">=</span><span class="n">secret1</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">hidden</span><span class="o">-</span><span class="k">import</span><span class="o">=</span><span class="n">secret2</span> <span class="o">^</span>
 <span class="o">--</span><span class="n">icon</span><span class="o">=..</span>\<span class="n">MLNMFLCN</span><span class="o">.</span><span class="n">ICO</span> <span class="o">^</span>
 <span class="n">myscript</span><span class="o">.</span><span class="n">spec</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>Linuxå¹³å°</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">pyinstaller</span> <span class="o">--</span><span class="n">noconfirm</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="n">WARN</span> \
 <span class="o">--</span><span class="n">onefile</span> <span class="o">--</span><span class="n">nowindow</span> \
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">data</span><span class="o">=</span><span class="s">"README:."</span> \
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">data</span><span class="o">=</span><span class="s">"image1.png:img"</span> \
 <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">binary</span><span class="o">=</span><span class="s">"libfoo.so:lib"</span> \
 <span class="o">--</span><span class="n">hidden</span><span class="o">-</span><span class="k">import</span><span class="o">=</span><span class="n">secret1</span> \
 <span class="o">--</span><span class="n">hidden</span><span class="o">-</span><span class="k">import</span><span class="o">=</span><span class="n">secret2</span> \
 <span class="o">--</span><span class="n">upx</span><span class="o">-</span><span class="nb">dir</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span> \
 <span class="n">myscript</span><span class="o">.</span><span class="n">spec</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>é€šè¿‡specæ–‡ä»¶<br />
é€šè¿‡å‘½ä»¤è¡Œå‘½ä»¤
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pyi</span><span class="o">-</span><span class="n">makespec</span> <span class="n">myscript</span><span class="o">.</span><span class="n">py</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>ç”Ÿæˆ.specæ–‡ä»¶ï¼Œåœ¨specæ–‡ä»¶ä¸­è®¾ç½®èµ„æºæ–‡ä»¶ç­‰ã€‚ <br />
åœ¨æˆ‘çš„ä½¿ç”¨ä¸­ï¼Œéœ€è¦ç›¸å…³å›¾æ ‡æ–‡ä»¶åŠå®éªŒæ•°æ®ï¼Œå…¨éƒ¨æ”¾åœ¨dataæ–‡ä»¶å¤¹ã€‚</p>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="n">block_cipher</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s">'gui.py'</span><span class="p">],</span>
             <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s">'D:</span><span class="se">\\</span><span class="s">py_remote_local</span><span class="se">\\</span><span class="s">imbalancedData'</span><span class="p">],</span>
             <span class="n">binaries</span><span class="o">=</span><span class="p">[],</span>
             <span class="n">datas</span><span class="o">=</span><span class="p">[(</span><span class="s">'data'</span><span class="p">,</span> <span class="s">'data'</span><span class="p">)],</span>
             <span class="n">hiddenimports</span><span class="o">=</span><span class="p">[</span><span class="s">'sklearn.utils._cython_blas'</span><span class="p">,</span> <span class="s">'cython'</span><span class="p">,</span> <span class="s">'sklearn'</span><span class="p">,</span> <span class="s">'sklearn.ensemble'</span><span class="p">,</span> <span class="s">'sklearn.neighbors.typedefs'</span><span class="p">,</span> <span class="s">'sklearn.neighbors.quad_tree'</span><span class="p">,</span> <span class="s">'sklearn.tree._utils'</span><span class="p">],</span>
             <span class="n">hookspath</span><span class="o">=</span><span class="p">[],</span>
             <span class="n">runtime_hooks</span><span class="o">=</span><span class="p">[],</span>
             <span class="n">excludes</span><span class="o">=</span><span class="p">[],</span>
             <span class="n">win_no_prefer_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">win_private_assemblies</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">cipher</span><span class="o">=</span><span class="n">block_cipher</span><span class="p">,</span>
             <span class="n">noarchive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pyz</span> <span class="o">=</span> <span class="n">PYZ</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">pure</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">zipped_data</span><span class="p">,</span>
             <span class="n">cipher</span><span class="o">=</span><span class="n">block_cipher</span><span class="p">)</span>
<span class="n">exe</span> <span class="o">=</span> <span class="n">EXE</span><span class="p">(</span><span class="n">pyz</span><span class="p">,</span>
          <span class="n">a</span><span class="o">.</span><span class="n">scripts</span><span class="p">,</span>
          <span class="p">[],</span>
          <span class="n">exclude_binaries</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">name</span><span class="o">=</span><span class="s">'gui'</span><span class="p">,</span>
          <span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
          <span class="n">bootloader_ignore_signals</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
          <span class="n">strip</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
          <span class="n">upx</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">console</span><span class="o">=</span><span class="bp">True</span> <span class="p">)</span>
<span class="n">coll</span> <span class="o">=</span> <span class="n">COLLECT</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">binaries</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">zipfiles</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">,</span>
               <span class="n">strip</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
               <span class="n">upx</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
               <span class="n">upx_exclude</span><span class="o">=</span><span class="p">[],</span>
               <span class="n">name</span><span class="o">=</span><span class="s">'gui'</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<p>binariesåˆ—è¡¨æ”¾äºŒè¿›åˆ¶èµ„æºæ–‡ä»¶ï¼Œdatasåˆ—è¡¨æ”¾éäºŒè¿›åˆ¶èµ„æºæ–‡ä»¶ã€‚é‡Œé¢å…ƒç´ å‡ä¸ºä¸€å…ƒç»„ï¼Œç¬¬ä¸€ä¸ªä½ç½®ä¸ºåœ¨æœ¬åœ°ç›®å½•ï¼Œç¬¬äºŒä¸ªä½ç½®ä¸ºæ‰“åŒ…åç›®å½•ã€‚</p>
<blockquote>
  <p>æ³¨ï¼šæ‰“åŒ…åä½ç½®åº”å¯¹åº”ç¨‹åºä¸­æ–‡ä»¶è·¯å¾„</p>
</blockquote>

<p>ä¹‹åè¿è¡Œ</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pyinstaller</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">mycript</span><span class="o">.</span><span class="n">spec</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="æŠ¥é”™å¦‚ä½•è§£å†³">æŠ¥é”™å¦‚ä½•è§£å†³</h2>
<ol>
  <li>å…ˆå‡çº§pyinstaller
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pyinstaller</span><span class="o">/</span><span class="n">pyinstaller</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">develop</span><span class="o">.</span><span class="nb">zip</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>å¯èƒ½æœ‰è¶…è¿‡æœ€å¤§depthé”™è¯¯ï¼Œä¿®æ”¹specæ–‡ä»¶</li>
  <li>è®¾ç½®ä¸º<code class="highlighter-rouge">--debug all</code>æ¨¡å¼ï¼Œæ‰“åŒ…ååœ¨å‘½ä»¤è¡Œå¯åŠ¨exeæ–‡ä»¶ï¼Œè§‚å¯Ÿè°ƒè¯•ä¿¡æ¯
    <blockquote>
      <p>æ³¨ï¼šè°ƒè¯•å®Œåº”è¯¥ç¼–è¯‘å‘å¸ƒç‰ˆï¼Œå¦åˆ™è¿è¡Œæ—¶è¾“å‡ºå¾ˆå¤šä¸­é—´ä¿¡æ¯ã€‚</p>
    </blockquote>
  </li>
  <li>ç»å¸¸æœ‰filenotfoundé”™è¯¯ï¼Œåˆ™è®¾ç½®hiddenimports</li>
  <li><a href="https://github.com/pyinstaller/pyinstaller/wiki/How-to-Report-Bugs">github link</a>
    <h2 id="what-to-do-next">what to do next</h2>
    <p><code class="highlighter-rouge">docker</code>?</p>
  </li>
</ol>
:ET