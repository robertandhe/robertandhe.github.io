I"ÿ%<h1 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°ï¼š</h1>
<p>Given n non-negative integers representing the histogramâ€™s bar height where the width of each bar is 1, find the area of largest rectangle in the histogram.
<img src="https://raw.githubusercontent.com/robertandhe/MarkDownPhotos/master/leetcode/84-1.PNG" alt="81-1" /><br />
Above is a histogram where width of each bar is 1, given height = [2,1,5,6,2,3].
<img src="https://raw.githubusercontent.com/robertandhe/MarkDownPhotos/master/leetcode/84-2.PNG" alt="81-2" /><br />
The largest rectangle is shown in the shaded area, which has area = 10 unit.<br />
Example:</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nl">Input:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">Output</span><span class="o">:</span> <span class="mi">10</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h1 id="åˆ†æ">åˆ†æï¼š</h1>
<p>é¢˜ç›®ç»™å‡ºä¸€ä¸ªè¡¨ç¤ºç›´æ–¹å›¾çš„å‘é‡ï¼Œè¦æ±‚å‡ºç›´æ–¹å›¾å†…æœ€å¤§çš„çŸ©å½¢é¢ç§¯ã€‚å¯¹æ±‚é¢ç§¯æ¥è¯´ï¼Œç›¸å½“äºæ°´æ¡¶åŸç†ï¼ŒçŸ®çš„è¾¹å¯¹çŸ©å½¢é¢ç§¯å½¢æˆé™åˆ¶ã€‚
æš´åŠ›æ³•å¯ä»¥æ±‚è§£ï¼Œä½†æ— æ³•é€šè¿‡OJã€‚</p>

<h1 id="è§£æ³•1å±€éƒ¨å³°å€¼">è§£æ³•1ï¼šå±€éƒ¨å³°å€¼</h1>
<p>å¦‚ä¾‹å­ä¸­1ï¼Œ5ï¼Œ6æ¥è¯´ï¼Œå¦‚æœ5èƒ½å½¢æˆçŸ©å½¢çš„å³è¾¹ï¼Œåˆ™å³è¾¹å¤§äºå®ƒçš„6è‚¯å®šä¹Ÿèƒ½å½¢æˆçŸ©å½¢çš„å³è¾¹ï¼Œä¸”é¢ç§¯æ›´å¤§ï¼Œå› æ­¤åº”è¯¥è·³è¿‡1ï¼Œ5ã€‚</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">largestRectangleArea</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">heights</span><span class="p">)</span> 
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mn</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">heights</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">heights</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">heights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">heights</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
			<span class="o">++</span><span class="n">i</span><span class="p">;</span>
		<span class="n">mn</span> <span class="o">=</span> <span class="n">heights</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">j</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">mn</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">mn</span><span class="p">,</span> <span class="n">heights</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
			<span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">mn</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
			<span class="n">res</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="è§£æ³•2å•è°ƒæ ˆ">è§£æ³•2ï¼šå•è°ƒæ ˆ</h1>
<p>å•è°ƒæ ˆçš„å¥½å¤„å°±æ˜¯åªç”¨éå†ä¸€æ¬¡æ•°æ®ã€‚å†å†³å®šç”¨é€’å¢æ ˆè¿˜æ˜¯é€’å‡æ ˆï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼ŒçŸ­è¾¹å½¢æˆå¯¹çŸ©å½¢é¢ç§¯çš„é™åˆ¶ï¼Œå½“å‡ºç°çŸ­è¾¹æ˜¯æ‰å¼€å§‹å¤„ç†ï¼ŒçŸ­è¾¹
å±äºè§¦å‘ä¿¡å·ï¼Œå› æ­¤åº”ç»´æŠ¤é€’å¢æ ˆã€‚å¤§äºæ ˆé¡¶å…ƒç´ å‡ºç°æ—¶ï¼ŒçŸ©å½¢é¢ç§¯è‚¯å®šåœ¨å¢å¤§ï¼Œç›´æ¥æ¨å…¥æ ˆï¼Œå°äºæ ˆé¡¶å…ƒç´ å‡ºç°æ—¶å¼€å§‹åˆ¤æ–­ï¼Œå¯¹é€’å¢æ ˆå†…æ¯ä¸€å…ƒç´ ï¼Œåé¢çš„è‚¯å®šæ¯”å‰é¢å¤§ï¼Œå› æ­¤å¯¹æ¯ä¸€æ ˆé¡¶ï¼ŒçŸ­è¾¹å°±æ˜¯æ ˆé¡¶å€¼ï¼Œé«˜åº¦å·²ç»ç¡®å®šï¼Œå®½åº¦å°±æ˜¯æ ˆé¡¶å…ƒç´ ä½ç½®åˆ°å½“å‰å…ƒç´ ä½ç½®çš„å·®è·ã€‚å› æ­¤æ ˆå†…åº”è¯¥å­˜æ”¾å…ƒç´ ä½ç½®è€Œä¸æ˜¯å…ƒç´ å€¼ã€‚</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">largestRectangleArea</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">heights</span><span class="p">)</span> 
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">heights</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">heights</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">){</span>
		<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">heights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">heights</span><span class="p">[</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()]){</span>
			<span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
			<span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
			<span class="n">res</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">heights</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="n">i</span> <span class="o">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)));</span>
		<span class="p">}</span>
		<span class="n">st</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="o">++</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>åœ¨ä¸Šé¢ç¨‹åºä¸­ï¼Œä¹‹æ‰€ä»¥å‡ºç°<code class="highlighter-rouge">i - st.top() - 1</code>æ˜¯å› ä¸ºå¯¹åŸå§‹å‘é‡çš„å…ƒç´ æ¨å…¥é€’å¢æ ˆåï¼Œåé¢å°çš„å…ƒç´ ä¼šæŠŠå‰é¢æ‰“çš„å…ƒç´ popã€‚
æ‰€ä»¥åœ¨å…ƒç´ ä¸­é—´æœ‰å³°é¡¶å¯¼è‡´ä½ç½®é—´æ–­æ—¶ï¼Œæ ˆé¡¶å…ƒç´ ä½ç½®è‚¯å®šæ˜¯å·¦è¾¹ã€‚å¦‚æœç”¨<code class="highlighter-rouge">i - cur</code>å¯èƒ½ä¼šå¯¼è‡´è·³è¿‡å·²ç»popæ‰çš„é«˜çš„è¾¹ï¼Œåšä¸»
å¼€å§‹ä¹Ÿæ²¡æ³¨æ„è¿™ç‚¹ã€‚</p>
:ET